<!DOCTYPE html>
<html>
<head>
  <title>Vice Tactics - Upgraded MVP</title>
  <style>
    body { font-family: monospace; background: #111; color: #eee; padding: 20px; }
    .card { border: 1px solid #444; padding: 10px; margin: 5px; background: #222; display: inline-block; width: 200px; }
    button { margin-top: 10px; }
    #log { margin-top: 20px; padding: 10px; background: #000; border: 1px solid #444; height: 200px; overflow-y: auto; }
  </style>
</head>
<body>
  <h1>Vice Tactics MVP â€“ Cyber Ronin vs. Psy-Ops AI</h1>
  <div id="status"></div>
  <div><strong>Hand:</strong></div>
  <div id="hand"></div>
  <button onclick="endTurn()">End Turn</button>
  <div id="log"><strong>Turn Log:</strong><br></div>
  <script>
    let playerHP = 25, opponentHP = 25, maxVice = 1, currentVice = 1, turn = 1, gameOver = false;
    let hand = [], deck = [], aiDeck = [], graveyard = [], log = [];

    const playerHero = "Cyber Ronin";
    const aiHero = "Psy-Ops Soldier";

    const heroModifiers = {
      "Cyber Ronin": { spell: 0, combat: -1, tech: -1 },
      "Psy-Ops Soldier": { spell: -1, combat: -2, tech: -1 }
    };

    const allCards = {
      "Firewall Override": { type: "tech", cost: 3, damage: 0 },
      "Headbutt": { type: "combat", cost: 4, damage: 4 },
      "Glitch Pulse": { type: "tech", cost: 2, damage: 2 },
      "Hack Spike": { type: "tech", cost: 2, damage: 2 },
      "Nanite Swarm": { type: "tech", cost: 1, damage: 1 },
      "Tech Slash": { type: "tech", cost: 3, damage: 4 },
      "Spellfire": { type: "spell", cost: 2, damage: 3 },
      "Curse of Vice": { type: "spell", cost: 4, damage: 2 },
      "Mana Burn": { type: "spell", cost: 3, damage: 2 },
      "Arcane Echo": { type: "spell", cost: 1, damage: 0 },
      "Combat Strategist": { type: "combat", cost: 5, damage: 3 },
      "Backstab": { type: "combat", cost: 3, damage: 2 },
      "Blade Flurry": { type: "combat", cost: 4, damage: 4 },
      "Magic Missile": { type: "spell", cost: 2, damage: 2 },
      "Battle Meditation": { type: "spell", cost: 3, damage: 0 },
      "Overclock": { type: "tech", cost: 2, damage: 0 },
      "System Shock": { type: "tech", cost: 3, damage: 3 },
      "Shield Block": { type: "combat", cost: 2, damage: 0 },
      "Adrenal Surge": { type: "combat", cost: 1, damage: 1 },
      "Chain Lightning": { type: "spell", cost: 5, damage: 5 }
    };

    const cyberRoninDeck = ["Firewall Override","Headbutt","Glitch Pulse","Hack Spike","Nanite Swarm","Tech Slash","Overclock","System Shock","Adrenal Surge","Shield Block"];
    const psyOpsDeck = ["Spellfire","Curse of Vice","Mana Burn","Arcane Echo","Combat Strategist","Backstab","Blade Flurry","Magic Missile","Battle Meditation","Chain Lightning"];

    function shuffleDeck(raw) {
      let arr = [];
      for (let i = 0; i < 4; i++) arr = arr.concat([...raw]);
      return arr.sort(() => Math.random() - 0.5);
    }

    function drawCard() {
      if (deck.length > 0 && hand.length < 10) hand.push(deck.shift());
    }

    function drawStartingHand() {
      for (let i = 0; i < 5; i++) drawCard();
    }

    function render() {
      document.getElementById("status").innerText = 
        gameOver ? "Game Over" : `Turn: ${turn} | Your HP: ${playerHP} | Opponent HP: ${opponentHP} | Vice: ${currentVice}/${maxVice}`;
      const handDiv = document.getElementById("hand");
      handDiv.innerHTML = "";
      hand.forEach((name, i) => {
        const card = allCards[name];
        const mod = heroModifiers[playerHero][card.type] || 0;
        const cost = Math.max(0, card.cost + mod);
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<strong>${name}</strong><br>Cost: ${cost}<br>Damage: ${card.damage}<br>`;
        const btn = document.createElement("button");
        btn.innerText = "Play";
        btn.onclick = () => playCard(i, cost);
        div.appendChild(btn);
        handDiv.appendChild(div);
      });

      document.getElementById("log").innerHTML = "<strong>Turn Log:</strong><br>" + log.slice(-20).join("<br>");
    }

    function playCard(index, actualCost) {
      if (gameOver) return;
      const name = hand[index];
      const card = allCards[name];
      if (actualCost <= currentVice) {
        currentVice -= actualCost;
        opponentHP -= card.damage;
        log.push(`Player played ${name} for ${actualCost} Vice. Dealt ${card.damage} damage.`);
        graveyard.push(hand.splice(index, 1)[0]);
        checkGameOver();
        render();
      } else {
        alert("Not enough Vice!");
      }
    }

    function checkGameOver() {
      if (playerHP <= 0 && opponentHP <= 0) {
        log.push("Draw! Both players hit 0 HP.");
        gameOver = true;
      } else if (opponentHP <= 0) {
        log.push("You win!");
        gameOver = true;
      } else if (playerHP <= 0) {
        log.push("You lose.");
        gameOver = true;
      }
    }

    function endTurn() {
      if (gameOver) return;
      // AI Turn
      let aiVice = Math.min(turn + 1, 10);
      let plays = shuffleDeck(psyOpsDeck).slice(0, 4);
      for (let name of plays) {
        const card = allCards[name];
        const mod = heroModifiers[aiHero][card.type] || 0;
        const cost = Math.max(0, card.cost + mod);
        if (cost <= aiVice) {
          aiVice -= cost;
          playerHP -= card.damage;
          log.push(`AI played ${name} for ${cost} Vice. Dealt ${card.damage} damage.`);
          checkGameOver();
          if (gameOver) break;
        }
      }
      turn++;
      maxVice = Math.min(10, turn);
      currentVice = maxVice;
      drawCard();
      render();
    }

    // Game start
    deck = shuffleDeck(cyberRoninDeck);
    aiDeck = shuffleDeck(psyOpsDeck);
    drawStartingHand();
    render();
  </script>
</body>
</html>
